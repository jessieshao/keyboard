<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>我的导航</title>
    <link rel="stylesheet" href="./style.css">
</head>
<body>
    <header></header>
    <main >
        <div class="wrapper" id ='main'></div>
    </main>
    <footer></footer>
    <script>
        var keys = {
            '0': ['1','2','3','4','5','6','7','8','9','0'],
            '1': ['q','w','e','r','t','y','u','i','o','p'],
            '2': ['a','s','d','f','g','h','j','k','l'],
            '3': ['z','x','c','v','b','n','m'],
            length: 4
        }
        var hash = {
            'q': 'qq.com',
            'w': 'weibo.com',
            'e': 'ele.me',
            'm': 'meituan.com', 
        }
        //取出localStorage 中的zzz对应的 hash
        var hashInLocalStorage = JSON.parse(localStorage.getItem('ppp')||'null')
        if(hashInLocalStorage){
            hash = hashInLocalStorage
        }
        //遍历keys
        i = 0
        while(i< keys['length']){
            div = document.createElement('div')
            div.className = 'row'
            main.appendChild(div)
            row = keys[i] //第几个数组
            console.log(row)
            j = 0
            while(j< row.length){
                kbd = document.createElement('kbd')
                span = document.createElement('span')
                kbd.className = 'key'
                span.textContent = row[j]
                span.className = 'text'
                kbd.appendChild(span)
                img = document.createElement('img')
                if(hash[row[j]]){
                    img.src = 'http://' + hash[row[j]] +'/favicon.ico'
                }
                else{
                    img.src = './1.png'
                }
                img.onerror = function(x){
                    x.target.src = './1.png'
                }
                div.appendChild(kbd)
                //加入编辑按钮
                btn = document.createElement('button')
                btn.textContent = '编辑'
                btn.id = row[j]
                btn.onclick = function(ewq){
                    //ewq['target']是点击的元素
                    key = ewq['target']['id']
                    var w = prompt('请输入网址')
                    hash[key] = w
                    localStorage.setItem('ppp',JSON.stringify(hash))
                }
                kbd.appendChild(img)
                kbd.appendChild(btn)
                j++
            }
            i++
        }
        document.onkeypress = function(qwe){
            key = qwe['key']  //q w e
            website = hash[key] 
            console.log(website)
            window.open('http://' + website, 'blank')
        }

    </script>
</body>
</html>